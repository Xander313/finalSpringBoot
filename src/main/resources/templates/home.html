<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{base :: layout(~{::title}, ~{::section}, ~{::style}, ~{::script})}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home</title>

  <style>
    .home-shell {
      max-width: 1000px;
      margin: 0 auto;
    }

    .home-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
    }

    .home-card {
      border: 1px solid #dee2e6;
      border-radius: 12px;
      padding: 16px;
      background: #fff;
    }

    .home-card h5 {
      margin-bottom: 8px;
    }
  </style>
</head>
<body>
<section>
  <div class="row mt-3">
    <div class="col-lg-12 home-shell">
      <div class="card">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center flex-wrap mb-3">
            <h4 class="mb-0">Bienvenido al sistema</h4>
            <form th:action="@{/logout}" method="post" class="mb-0">
              <button type="submit" class="btn btn-danger btn-sm">
                <i class="fa-solid fa-right-from-bracket mr-1"></i> Cerrar sesion
              </button>
            </form>
          </div>
          <p class="text-muted">Usuario autenticado: <strong th:text="${username}">usuario</strong></p>
          <div class="home-grid">
            <div class="home-card">
              <h5>Secciones del plan ambiental</h5>
              <p class="mb-3">Gestiona las secciones del plan ambiental.</p>
              <a class="btn btn-primary btn-sm" th:href="@{/secciones-plan-ambiental}">Ir a secciones</a>
            </div>

            <div class="home-card">
              <h5>Acciones del plan ambiental</h5>
              <p class="mb-3">Gestiona las acciones vinculadas a las secciones.</p>
              <a class="btn btn-primary btn-sm" th:href="@{/acciones-plan-ambiental}">Ir a acciones</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script th:if="${param.loginSuccess}">
  document.addEventListener('DOMContentLoaded', function () {
    if (window.Swal) {
      Swal.fire({
        icon: 'success',
        title: 'Bienvenido',
        text: 'Inicio de sesion exitoso',
        timer: 2200,
        showConfirmButton: false
      });
    }

    if (window.history && window.history.replaceState) {
      window.history.replaceState({}, document.title, '/home');
    }
  });
</script>
</body>
</html>
